//line samples/client/pgx.go:1:1
package main

import (
	"context"

	"github.com/jackc/pgx/v5"
	"github.com/jackc/pgx/v5/pgxpool"
//line <generated>
	__orchestrion_pgx "gopkg.in/DataDog/dd-trace-go.v1/contrib/jackc/pgx.v5"
)

//line samples/client/pgx.go:10
func pgxExample() {
	ctx := context.Background()
	dbURL := "postgres://username:password@localhost:5432/database_name"
	var (
		conn *pgx.Conn
		err  error
	)

	conn, err = __orchestrion_pgx.Connect(ctx, dbURL)
	if err != nil {
		panic(err)
	}
	cfg, err := pgx.ParseConfig(dbURL)
	if err != nil {
		panic(err)
	}
	conn, err = __orchestrion_pgx.ConnectConfig(ctx, cfg)
	if err != nil {
		panic(err)
	}
	conn, err = pgx.ConnectWithOptions(ctx, dbURL, pgx.ParseConfigOptions{})
	if err != nil {
		panic(err)
	}
	defer conn.Close(ctx)

	_, err = conn.Query(ctx, "SELECT * FROM users")
	if err != nil {
		panic(err)
	}
}

func pgxPoolExample() {
	ctx := context.Background()
	dbURL := "postgres://username:password@localhost:5432/database_name"

	var (
		pool *pgxpool.Pool
		err  error
	)

	pool, err = __orchestrion_pgx.NewPool(ctx, dbURL)
	if err != nil {
		panic(err)
	}
	cfg, err := pgxpool.ParseConfig(dbURL)
	if err != nil {
		panic(err)
	}
	pool, err = __orchestrion_pgx.NewPoolWithConfig(ctx, cfg)
	if err != nil {
		panic(err)
	}
	defer pool.Close()

	_, err = pool.Query(ctx, "SELECT 1")
	if err != nil {
		panic(err)
	}
}
