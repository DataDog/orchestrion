---
# This file is generated by `go generate ./internal/injector/builtin`. DO NOT EDIT.
title: net/http
subtitle: HTTP client and server implementations.
icon: at-symbol
---


HTTP client and server implementations.




## Wrap http.Server.Handler

<div class="hextra-cards hx-mt-4 hx-gap-4 hx-grid" style="--hextra-cards-grid-cols: 1;">
  <div class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200">
    <div>
      <span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">
        {{<iconSVG "search-circle">}} Join Point
      </span>
      <div class="hextra-card-subtitle hx-font-normal hx-px-4 hx-mb-4 hx-mt-2"><strong>All of</strong> the following:
<ul>
<li>Configuration includes:
<ul>
<li><code>httpmode = "wrap"</code></li>
</ul>
</li><li>Composite literal of type <code><a href="http://pkg.go.dev/net/http#Server" target="_blank" rel="noopener">net/http<wbr>.Server</a></code></li><li><strong>None of</strong> the following:
<ul>
<li>Import path is <a href="http://pkg.go.dev/github.com/go-chi/chi/v5" target="_blank" rel="noopener"><code>github.com/go-chi/chi/v5</code></a></li>
<li>Import path is <a href="http://pkg.go.dev/github.com/go-chi/chi/v5/middleware" target="_blank" rel="noopener"><code>github.com/go-chi/chi/v5/middleware</code></a></li>
<li>Import path is <a href="http://pkg.go.dev/golang.org/x/net/http2" target="_blank" rel="noopener"><code>golang.org/x/net/http2</code></a></li>
</ul>
</li></ul>
</div>
    </div>
    <div class="hx-border-t">
      <span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">
        {{<iconSVG "chip">}} Advice
      </span>
      <div class="hextra-card-subtitle hx-font-normal hx-px-4 hx-mb-4 hx-mt-2">Wrap the expression using: 

Identifier | Import Path
---|---
<code>instrument</code>|<a href="http://pkg.go.dev/github.com/datadog/orchestrion/instrument" target="_blank" rel="noopener"><code>"github.com/datadog/orchestrion/instrument"</code></a>


```go-template
//dd:startwrap
instrument.WrapHandler({{.}})
//dd:endwrap
```

</div>
    </div>
  </div>
</div>

## Wrap http.HandlerFunc

<div class="hextra-cards hx-mt-4 hx-gap-4 hx-grid" style="--hextra-cards-grid-cols: 1;">
  <div class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200">
    <div>
      <span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">
        {{<iconSVG "search-circle">}} Join Point
      </span>
      <div class="hextra-card-subtitle hx-font-normal hx-px-4 hx-mb-4 hx-mt-2"><strong>All of</strong> the following:
<ul>
<li>Configuration includes:
<ul>
<li><code>httpmode = "wrap"</code></li>
</ul>
</li><li>Function declaration where:
<ul>
<li>Is a function literal expression</li>
<li>Has signature <code>func(<a href="http://pkg.go.dev/net/http#ResponseWriter" target="_blank" rel="noopener">net/http<wbr>.ResponseWriter</a>, *<a href="http://pkg.go.dev/net/http#Request" target="_blank" rel="noopener">net/http<wbr>.Request</a>)</code></li>
</ul>
</li><li><strong>None of</strong> the following:
<ul>
<li>Import path is <a href="http://pkg.go.dev/github.com/go-chi/chi/v5" target="_blank" rel="noopener"><code>github.com/go-chi/chi/v5</code></a></li>
<li>Import path is <a href="http://pkg.go.dev/github.com/go-chi/chi/v5/middleware" target="_blank" rel="noopener"><code>github.com/go-chi/chi/v5/middleware</code></a></li>
<li>Import path is <a href="http://pkg.go.dev/golang.org/x/net/http2" target="_blank" rel="noopener"><code>golang.org/x/net/http2</code></a></li>
</ul>
</li></ul>
</div>
    </div>
    <div class="hx-border-t">
      <span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">
        {{<iconSVG "chip">}} Advice
      </span>
      <div class="hextra-card-subtitle hx-font-normal hx-px-4 hx-mb-4 hx-mt-2">Wrap the expression using: 

Identifier | Import Path
---|---
<code>instrument</code>|<a href="http://pkg.go.dev/github.com/datadog/orchestrion/instrument" target="_blank" rel="noopener"><code>"github.com/datadog/orchestrion/instrument"</code></a>


```go-template
instrument.WrapHandlerFunc({{.}})
```

</div>
    </div>
  </div>
</div>

## Report http.HandlerFunc calls

<div class="hextra-cards hx-mt-4 hx-gap-4 hx-grid" style="--hextra-cards-grid-cols: 1;">
  <div class="hextra-card hx-group hx-flex hx-flex-col hx-justify-start hx-overflow-hidden hx-rounded-lg hx-border hx-border-gray-200 hx-text-current hx-no-underline dark:hx-shadow-none hover:hx-shadow-gray-100 dark:hover:hx-shadow-none hx-shadow-gray-100 active:hx-shadow-sm active:hx-shadow-gray-200 hx-transition-all hx-duration-200">
    <div>
      <span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">
        {{<iconSVG "search-circle">}} Join Point
      </span>
      <div class="hextra-card-subtitle hx-font-normal hx-px-4 hx-mb-4 hx-mt-2"><strong>All of</strong> the following:
<ul>
<li>Configuration includes:
<ul>
<li><code>httpmode = "report"</code></li>
</ul>
</li><li>Body of:<div>Function declaration where:
<ul>
<li>Has signature <code>func(<a href="http://pkg.go.dev/net/http#ResponseWriter" target="_blank" rel="noopener">net/http<wbr>.ResponseWriter</a>, *<a href="http://pkg.go.dev/net/http#Request" target="_blank" rel="noopener">net/http<wbr>.Request</a>)</code></li>
</ul>
</div></li><li><strong>None of</strong> the following:
<ul>
<li>Import path is <a href="http://pkg.go.dev/github.com/go-chi/chi/v5" target="_blank" rel="noopener"><code>github.com/go-chi/chi/v5</code></a></li>
<li>Import path is <a href="http://pkg.go.dev/github.com/go-chi/chi/v5/middleware" target="_blank" rel="noopener"><code>github.com/go-chi/chi/v5/middleware</code></a></li>
<li>Import path is <a href="http://pkg.go.dev/golang.org/x/net/http2" target="_blank" rel="noopener"><code>golang.org/x/net/http2</code></a></li>
</ul>
</li></ul>
</div>
    </div>
    <div class="hx-border-t">
      <span class="hextra-card-icon hx-flex hx-font-semibold hx-items-start hx-gap-2 hx-p-4 hx-text-gray-700 hover:hx-text-gray-900 dark:hx-text-neutral-200 dark:hover:hx-text-neutral-50">
        {{<iconSVG "chip">}} Advice
      </span>
      <div class="hextra-card-subtitle hx-font-normal hx-px-4 hx-mb-4 hx-mt-2">Prepend statements using: 

Identifier | Import Path
---|---
<code>event</code>|<a href="http://pkg.go.dev/github.com/datadog/orchestrion/instrument/event" target="_blank" rel="noopener"><code>"github.com/datadog/orchestrion/instrument/event"</code></a>
<code>instrument</code>|<a href="http://pkg.go.dev/github.com/datadog/orchestrion/instrument" target="_blank" rel="noopener"><code>"github.com/datadog/orchestrion/instrument"</code></a>


```go-template
{{- $arg := .Function.Argument 1 -}}
{{- $name := .Function.Name -}}
{{$arg}} = {{$arg}}.WithContext(instrument.Report(
  {{$arg}}.Context(),
  event.EventStart,
  {{with $name}}"function-name", {{printf "%q" .}},{{end}}
  "span.kind", "server",
  "http.method", {{$arg}}.Method,
  "http.url", {{$arg}}.URL,
  "http.useragent", {{$arg}}.Header.Get("User-Agent"),
  {{ range .DirectiveArgs "dd:span" -}}{{printf "%q, %q,\n" .Key .Value}}{{ end }}
))
defer instrument.Report(
  {{$arg}}.Context(),
  event.EventEnd,
  {{with $name}}"function-name", {{printf "%q" .}},{{end}}
  "span.kind", "server",
  "http.method", {{$arg}}.Method,
  "http.url", {{$arg}}.URL,
  "http.useragent", {{$arg}}.Header.Get("User-Agent"),
  {{ range .DirectiveArgs "dd:span" -}}{{printf "%q, %q," .Key .Value}}{{- end }}
)
```

</div>
    </div>
  </div>
</div>

